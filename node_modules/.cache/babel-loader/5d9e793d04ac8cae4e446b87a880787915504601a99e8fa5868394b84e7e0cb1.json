{"ast":null,"code":"import _regeneratorRuntime from\"/Users/leemadeleine/dev/music-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/leemadeleine/dev/music-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/leemadeleine/dev/music-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/leemadeleine/dev/music-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{useEffect,useState}from\"react\";import styled from\"styled-components\";import{getSimple}from\"../../services/APIs/MusicAppAPI/MusicAppAPI.js\";import{moods}from\"./config.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var getSrc=function getSrc(externalUrl){var parts=externalUrl.split(\"/playlist/\");var src=parts[0]+\"/embed/playlist/\"+parts[1];console.log(src);return src;};var SimpleScreen=function SimpleScreen(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hasError=_useState2[0],setHasError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentMood=_useState4[0],setCurrentMood=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentURI=_useState6[0],setCurrentURI=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),currentSrc=_useState8[0],setCurrentSrc=_useState8[1];useEffect(function(){if(currentMood){try{var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getSimple(currentMood);case 2:response=_context.sent;setCurrentURI(response.uri);setCurrentSrc(getSrc(response.uri));case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();}catch(_unused){setHasError(true);}}},[currentMood]);useEffect(function(){console.log(currentURI);window.onSpotifyIframeApiReady=function(IFrameAPI){console.log(IFrameAPI);var element=document.getElementById(\"embed-iframe\");var options={uri:\"spotify:playlist:71I1utEsNeXmb4O28RAeaz\"};var callback=function callback(EmbedController){console.log(currentURI);if(currentURI){EmbedController.loadUri(currentURI);setCurrentURI(null);}};IFrameAPI.createController(element,options,callback);};},[currentURI]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Simple Screen\"}),Object.keys(moods).map(function(moodName){var mood=moods[moodName];return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setCurrentMood(moodName);},children:mood.displayName},moodName);}),/*#__PURE__*/_jsx(\"div\",{id:\"embed-iframe\",children:/*#__PURE__*/_jsx(\"iframe\",{title:\"playlist-iframe\",src:currentSrc||\"https://open.spotify.com/playlist/71I1utEsNeXmb4O28RAeaz?utm_source=generator\",width:\"380\",height:\"380\",frameBorder:\"0\",allow:\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\"},currentURI)}),hasError&&/*#__PURE__*/_jsx(\"div\",{children:\"Error\"})]});};export default SimpleScreen;","map":{"version":3,"names":["useEffect","useState","styled","getSimple","moods","Container","div","getSrc","externalUrl","parts","split","src","console","log","SimpleScreen","hasError","setHasError","currentMood","setCurrentMood","currentURI","setCurrentURI","currentSrc","setCurrentSrc","fetchData","response","uri","window","onSpotifyIframeApiReady","IFrameAPI","element","document","getElementById","options","callback","EmbedController","loadUri","createController","Object","keys","map","moodName","mood","displayName"],"sources":["/Users/leemadeleine/dev/music-app/src/components/SimpleScreen/SimpleScreen.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { getSimple } from \"../../services/APIs/MusicAppAPI/MusicAppAPI.js\";\nimport { moods } from \"./config.js\";\n\nconst Container = styled.div``;\n\nconst getSrc = (externalUrl) => {\n  const parts = externalUrl.split(\"/playlist/\");\n  const src = parts[0] + \"/embed/playlist/\" + parts[1];\n  console.log(src);\n  return src;\n};\n\nconst SimpleScreen = () => {\n  const [hasError, setHasError] = useState(false);\n  const [currentMood, setCurrentMood] = useState(null);\n  const [currentURI, setCurrentURI] = useState(null);\n  const [currentSrc, setCurrentSrc] = useState(null);\n  \n  useEffect(() => {\n    if (currentMood) {\n      try {\n        async function fetchData() {\n          const response = await getSimple(currentMood);\n          setCurrentURI(response.uri);\n          setCurrentSrc(getSrc(response.uri));\n        }\n        fetchData();\n      } catch {\n        setHasError(true);\n      }\n    }\n  }, [currentMood]);\n\n  useEffect(() => {\n    console.log(currentURI);\n    window.onSpotifyIframeApiReady = (IFrameAPI) => {\n      console.log(IFrameAPI);\n      let element = document.getElementById(\"embed-iframe\");\n      let options = {\n        uri: \"spotify:playlist:71I1utEsNeXmb4O28RAeaz\",\n      };\n      let callback = (EmbedController) => {\n        console.log(currentURI);\n        if (currentURI) {\n          EmbedController.loadUri(currentURI);\n          setCurrentURI(null);\n        }\n      };\n      IFrameAPI.createController(element, options, callback);\n    };\n  }, [currentURI]);\n\n  return (\n    <Container>\n      <h1>Simple Screen</h1>\n      {Object.keys(moods).map((moodName) => {\n        const mood = moods[moodName];\n        return (\n          <div key={moodName} onClick={() => setCurrentMood(moodName)}>\n            {mood.displayName}\n          </div>\n        );\n      })}\n      <div id=\"embed-iframe\">\n        <iframe\n          key={currentURI}\n          title=\"playlist-iframe\"\n          src={\n            currentSrc ||\n            \"https://open.spotify.com/playlist/71I1utEsNeXmb4O28RAeaz?utm_source=generator\"\n          }\n          width=\"380\"\n          height=\"380\"\n          frameBorder=\"0\"\n          allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\"\n        ></iframe>\n      </div>\n\n      {hasError && <div>Error</div>}\n    </Container>\n  );\n};\n\nexport default SimpleScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}